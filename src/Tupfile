include_rules

NIMDOC_FLAGS += --git.url:"https://codeberg.org/eris/nim-eris"
NIMDOC_FLAGS += --git.commit:`git describe --always`
# NIMDOC_FLAGS += --project

NIMDOC_OUTPUTS += htmldocs/_._/eris.html
NIMDOC_OUTPUTS += htmldocs/_._/eris.idx
NIMDOC_OUTPUTS += htmldocs/cbor_stores.html
NIMDOC_OUTPUTS += htmldocs/cbor_stores.idx
NIMDOC_OUTPUTS += htmldocs/coap_stores.html
NIMDOC_OUTPUTS += htmldocs/coap_stores.idx
NIMDOC_OUTPUTS += htmldocs/composite_stores.html
NIMDOC_OUTPUTS += htmldocs/composite_stores.idx
NIMDOC_OUTPUTS += htmldocs/filters.html
NIMDOC_OUTPUTS += htmldocs/filters.idx
NIMDOC_OUTPUTS += htmldocs/dochack.js
NIMDOC_OUTPUTS += htmldocs/http_stores.html
NIMDOC_OUTPUTS += htmldocs/http_stores.idx
NIMDOC_OUTPUTS += htmldocs/memory_stores.html
NIMDOC_OUTPUTS += htmldocs/memory_stores.idx
NIMDOC_OUTPUTS += htmldocs/nimdoc.out.css
NIMDOC_OUTPUTS += htmldocs/private/syndicate_protocol.html
NIMDOC_OUTPUTS += htmldocs/private/syndicate_protocol.idx
NIMDOC_OUTPUTS += htmldocs/syndicate_stores.html
NIMDOC_OUTPUTS += htmldocs/syndicate_stores.idx
NIMDOC_OUTPUTS += htmldocs/theindex.html
NIMDOC_OUTPUTS += htmldocs/tkrzw_stores.html
NIMDOC_OUTPUTS += htmldocs/tkrzw_stores.idx
NIMDOC_OUTPUTS += htmldocs/url_stores.html
NIMDOC_OUTPUTS += htmldocs/url_stores.idx
NIMDOC_OUTPUTS += htmldocs/cbor_stores.html
NIMDOC_OUTPUTS += htmldocs/cbor_stores.idx
NIMDOC_OUTPUTS += htmldocs/composite_stores.idx
NIMDOC_OUTPUTS += htmldocs/eriscmd/eriscbor.html
NIMDOC_OUTPUTS += htmldocs/eriscmd/eriscbor.idx
NIMDOC_OUTPUTS += htmldocs/tkrzw_stores.html

!nimdoc = |> nim doc $(NIMDOC_FLAGS) --outdir:htmldocs %f |> htmldocs/%B.html htmldocs/nimdoc.out.css

: src/eris.nim | $(PRESERVES_TOP)/<preserves> |> !nimdoc |>
